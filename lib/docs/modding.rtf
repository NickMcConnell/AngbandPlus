{\rtf1\mac\ansicpg10000\cocoartf824\cocoasubrtf440
{\fonttbl\f0\fnil\fcharset77 Monaco;\f1\fswiss\fcharset77 ArialMT;}
{\colortbl;\red255\green255\blue255;}
\paperw11900\paperh16840\margl1440\margr1440\vieww19180\viewh12600\viewkind0
\deftab720
\pard\pardeftab720\ql\qnatural

\f0\fs22 \cf0 # The artifact indexes are defined in "defines.h", and must not be changed.\
\
# Hack -- "Grond" and "Morgoth" MUST have a rarity of one, or they might\
# not be dropped when Morgoth is killed.  Note that they, like the "special"\
# artifacts, are never created "accidentally".\
\
# === Understanding artifact.txt ===\
\
# N: serial number : item name\
# I: tval : sval : pval\
# W: depth : rarity : weight : cost\
# P: base armor class : base damage : plus to-hit : plus to-dam : plus to-ac\
# F: flag | flag | etc\
# A: activation : recharge time : recharge time dice\
\
# 'N' indicates the beginning of an entry. The serial number must\
# increase for each new item.\
\
# 'I' is for basic information. The tval is for the type of item, the\
# sval identifies the subtype and the pval indicates the amount of\
# effect the item has, if applicable.\
\
# 'W' is for extra information. Depth is the depth the object is\
# normally found at, rarity determines how common the object is,\
# weight is in tenth-pounds and cost is the item's value.\
\
# 'P' is for power information. The items base armor class, its base\
# damage and pluses to-hit, to-dam and to-ac.\
\
# 'F' is for flags. These are fairly self-explanatory. As many F:\
# lines may be used as are needed to specify all the flags and flags\
# are separated by the '|' symbol.\
\
# 'A' is for activation.  Activation is the effect the artifact\
# activates for. The recharge time calculates from the recharge time\
# plus a random value between 1 and the recharge time dice (if not 0).\
# If an activation is given then the artifact must also have the\
# ACTIVATE flag.\
\
# The activation is now an index into s_info.txt, except for the one ring.\
\
### IMPORTANT NOTES ###\
# (1.) Any changes or additions to the file will have influence on randarts \
# and may break savefile compatibility for old savegames with randarts.  If \
# using random artifacts, finish your existing game before making any changes\
# to the artifact.txt file at all.\
# (2.) Removing any artifact, or changing its "base" type (as defined by \
# the tval and sval entries in the "I:" line), will break savefile compatibility\
# for ALL savefiles.\
# (3.) Adding a new artifact, or changing the powers of existing ones, will NOT \
# affect savefile compatibility for games with the standard artifact set: it is \
# perfectly safe to do this. (If your new artifact is a new kind of object, or a \
# new one at the end of the file, you must also amend object.txt or limits.txt.)\
\
# New artifacts (22) are as follows:\
# 7: The Palantir of Westernesse (original creation by JLE)\
# 14: The Elfstone 'Elessar'\
# 15: The Jewel 'Evenstar'\
# 18: The Balance Dragon Scale Mail 'Mediator' (original JLE creation)\
# 26: The Hard Leather Armor of Himring (adapted from OAngband)\
# 29: The Shield of Deflection of Gil-galad (adapted from OAngband)\
# 33: The Metal Cap of Celebrimbor (suggested by Matthias Kurzke)\
# 43: The Jewel-Encrusted Crown of Numenor (adapted from OAngband)\
# 51: The Gauntlets of Eol (adapted from OAngband)\
# 63: The Soft Leather Boots of Wormtongue (original JLE creation)\
# 92: The Spear of Melkor (adapted from KAngband)\
# 110: The Beaked Axe of Hurin (adapted from KAngband)\
# 123: The Whip of Gothmog (original JLE creation)\
# 127: The Heavy Crossbow of Umbar (adapted from OAngband)\
# 128, 129: The Short Bows of Amrod and Amras (original JLE creations)\
# 130: The Mattock of Nain (original JLE creation)\
# 131: The Dwarven Pick of Erebor (adapted from SAngband)\
# 132: The Ball-and-Chain of Fundin Bluecloak (suggested by Skylar Thompson)\
# 133: The Main Gauche of Azaghal (adapted from KAngband)\
# 134: The Large Leather Shield of the Haradrim (suggested by Skylar Thompson)\
# 135: The Broken Sword 'Narsil' (original JLE creation)\
# 136: The Bastard Sword of Eowyn (original JLE creation)\
\
# Changes related to AGI/DEX rebalance:\
# reduced the speed bonuses of the Big Three speed arts; removed speed bonus from arts that also have DEX boost: 'Thalkettoth', Wormtongue, Maedhros, 'Angrist', Eorlingas, Bard, Amras, ; but not removed the double boost on the Rings of Power, 'Sting', 'Belthronding', 'Aglarang' and Numenor, but lowered pval on the last two\
\pard\pardeftab720\ql\qnatural

\f1\fs24 \cf0 \
\pard\pardeftab720\ql\qnatural

\f0\fs22 \cf0 # Here is the list of "Special" artifacts - Amulets, Light Sources, Rings.\
# Only the FIRST 15 artifacts may be of these types currently: artifacts\
# from index number 16 onwards must be Armor or Weapons.\
\
\pard\pardeftab720\ql\qnatural

\f1\fs24 \cf0 \
\pard\pardeftab720

\f0\fs22 \cf0 # The ego-item indexes are defined in "defines.h", and must not be changed.\
\
# Ego-items 1-63 are "armor", and 64-127 are "weapons"\
\
# Note that every "ego-item" type has a different "index", and can only be\
# created from items that belong to a certain "slot" in the equipment, if\
# one assumes that "ammo" belongs to an imaginary slot (23).\
#\
# Note that the above is not true and was not true even before my patch. \
# The 'slot' seems very useless to me right now. -MWK-\
#\
# Note that several "ego-item" types may share the same "textual name",\
# such as with "Armor of Resistance" and "Shield of Resistance".\
\
# === Understanding ego_item.txt ===\
\
# N: serial number : ego type\
# X: inventory slot : rating : xtra\
# C: max to-hit : max to-dam : max to-ac : pval\
# W: depth : rarity : weight : cost\
# T: tval : min_sval : max_sval\
# F: flag | flag | etc\
\
# 'N' indicates the beginning of an entry. The serial number must\
# increase for each new item.\
\
# 'X' is for extra information - inventory slot and rating. Slots\
# range from 23 (for ammunition) to 35 (for boots). Rating affects\
# level feelings.  The xtra value determines random extra flags for\
# the ego-item.  Nothing happens with a value of 0, 1 stands for\
# "one random extra sustain", 2 is "one random extra resist", and\
# 3 is "one random extra ability".\
\
# 'C' is for creation bonusses - maximum to-hit, to-dam, to-ac, and\
# pval. Cursed ego-items will negate the given value.\
\
# 'W' is for extra information. Depth is the depth the object is\
# normally found at, rarity determines how common the object is,\
# weight is in tenth-pounds and cost is the items value.\
\
# 'F' is for flags. These are fairly self-explanatory. As many F:\
# lines may be used as are needed to specify all the flags and flags\
# are separated by the '|' symbol.\
\
# 'T' is for possible 'tval' and 'sval' values of the base-item.\
# Up to three 'T' entries are possible for a single object. The\
# ego-item can only be generated from items of this tval, with sval\
# in the specified range.\
\
# New ego-items added by JLE are:\
# 10: Armor of Vulnerability (cursed ego-type for armor)\
# 12: Dwarven Armor (heavy metal armor only)\
# 21: Shield of Elvenkind (returning from Angband 2.7.8 and previous versions)\
# 22: Shield of Preservation\
# 23: Shield of Vulnerability (cursed ego-type for shields)\
# 36: Crown of Serenity (adapted from OAngband: replaces Helm of Stupidity)\
# 37: Crown of Night & Day (partially adapted from an OAngband ego-item)\
# 43: Cloak of the Magi\
# 52: Gloves of Thievery (leather gloves only)\
# 53: Gauntlets of Combat (gauntlets and cesti only)\
# 60: Boots of Stability (from OAngband)\
# 61: Boots of Elvenkind (replaces Boots of Noise - too many cursed types of boot)\
# 67: Weapon of Gondolin (rarer and more powerful than Westernesse)\
# 70: Weapon of Fury (nastier than a Weapon of Extra Attacks, but also aggravates)\
# 76: Weapon of Venom (Poison Brand: does NOT, however, provide poison resist)\
# 101: Shovel/Pick of Impact\
# 106: Bow of Lothlorien\
# 107: Crossbow of the Haradrim\
# 110: Sling of Buckland\
# 111: Bow/Crossbow of the Nazgul (cursed bow ego-type)\
# 120: Ammo of Holy Might (seeker, silver and mithril stuff only)\
# 121: Ammo of Venom\
\
# Changes for Unangband.\
\
# Added Slay Evil to Defender. Made Blessed weapons have a high resist rather than\
# special ability (Should make them more useful sometimes, except for telepathy).\
# Moved some of these items around for compatibility with Unangband save files.\
# Heavily discounted basic slay weapons and made more common, so that low level\
# characters are more likely to find and use them.\
# Added 4 additional 'branded' ego weapons, Enchanted weapon, and other ego items.\
# Added instruments of the Might/Lordliness/Serenity/Dullness.\
#\
# Changes related to AGI/DEX rebalance:\
# moved Seven League deeper and Thievery shallower\
# added Cloaks of the Bat\
#\
\pard\pardeftab720\ql\qnatural

\f1\fs24 \cf0 \
=== Understanding flavor.txt ===\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\ql\qnatural\pardirnatural

\f0\fs22 \cf0 \
\pard\pardeftab720
\cf0 \
# N:<index>:<tval>:<sval>\
# G:<char>:<attr>\
# D:<text>\
\pard\pardeftab720\ql\qnatural

\f1\fs24 \cf0 \
\
\
=== Understanding monster.txt ===\
\
This file describes the monster.txt file in the lib\\edit folder.  The monster.txt file is used to initialise almost all information about the monster races in the game.  The file is parsed into the monster.raw file in lib\\data which is a raw data file which is loaded into memory.  The raw file is created if it does not exist, or if the date on the monster.txt file is later than the raw file.  It is best practise to always delete the raw file if you \
\
The monster.txt file consists of one entry for each monster race, which is laid out as follows:
\f0 \
\
N: serial number : monster name\
G: symbol : color\
I: speed : hit points : vision : armor class : alertness\
W: depth : rarity : group index : experience for kill\
M: innate frequency : spell frequency : spell power : mana\
B: attack method : attack effect : damage\
S: spell type | spell type | etc\
F: flag | flag | etc\
D: Description\
\

\f1 'N' indicates the beginning of an entry. The serial number must increase for each new item. Entry 0 is used for the player.\
\
'G' is for graphics - symbol and color. There are currently 16 colors, as follows:\
\
\pard\pardeftab720\ql\qnatural

\f0 \cf0 D - Dark Gray    w - White          s - Gray          o - Orange\
r - Red          g - Green          b - Blue          u - Brown\
d - Black        W - Light Gray     v - Violet        y - Yellow\
R - Light Red    G - Light Green    B - Light Blue    U - Light Brown\
\pard\pardeftab720\ql\qnatural

\f1 \cf0 \
(note that "black" is the same color as the screen background, and thus the monster will appear to be an empty black space if its color is "d".)\
\
'I' is for information - speed, health, vision in tens of feet, armor class, and alertness. 110 is normal speed. Alertness ranges from 0 (ever vigilant for intruders) to 255 (prefers to ignore intruders).\
\
'W' is for more information - level, rarity, group index and experience for killing.  The group index is index to associate monsters of a particular type together. Monsters with the same group index will often be generated on the same level together.  Group indexes if defined will also be used for escorts and for the summon group summoning spell.  The current group indexes in use are:\
\
1  Apprentices\
10 Mimic\
11 - 19 Elementals\
20 Golem\
21 Ghost\
22 Spirit\
23 Golem\
24 Faerie\
25 Ant\
26 Termite\
\
'B' is for blows - method of attack, effect of attack, and damage from attack. There may be up to four of these lines; effect and damage are optional.\
\
'M' is for magic information - cast innate, cast spell, spell power, and mana.  All breath weapons and a few other spells are 'innate' and use the innate percentage chance to determine how frequently they are cast. In addition, some blow types may be used at range (such as arrow, lash, spit and so on) and also use the cast innate to determine how frequently they may be used.\
\
All other spells use the cast spell percentage chance to determine their frequency. In addition, the spell power determines the damage multiplier for these spells (but not breath weapons, which depend on hit points).\
\
Monster mana determines how many spells may be cast before having to rest to recover mana, or cast a spell to add mana. Each monster spell has a mana cost that is associated with this.\
\
'S' is for spells. These are explained in more detail below. As many S: lines may be used as are needed to specify all the spells, spells\
are separated by the '|' symbol.\
\
'F' is for flags. These are explained in more detail below. As many F: lines may be used as are needed to specify all the flags, flags are separated by the '|' symbol.\
\
'D' is for description. As many D: lines may be used as are needed to describe the monster.\
\
=== Understanding monster race flags ===\
\
To understand the additional monster flags, you should grep the code base using the regular expression RF[0-9]_ followed by the monster flag as shown in the monster.txt file.\
\
Brief explanations of a number of flags follow:\
\
UNIQUE monsters are just "special" monster races, with the requirement that only one monster of that race can exist at a time, and when it is killed, it can never again be generated.\
\
ATTR_CLEAR monsters appear the same color as the floor, terrain feature or object underneath them.\
\
ATTR_MULTI monsters are "multi-hued" - they change color, every player turn.\
\
ATTR_METAL monsters have a occasionally "flickering" attr which is one step lighter than their base color.\
\
CHAR_CLEAR monsters are totally invisible: the symbol shown on the screen is the same as the floor (or other terrain feature) below it, or the item that is lying on that floor. These monsters can currently be targetted as normal monsters: perhaps this can be changed so that the player must KNOW the monster is there (by bumping into it, or having the monster wake up and attack the player?)\
\
CHAR_MULTI monsters are those which look like objects, and use the symbols of objects. They are in plain sight, but the character should not know that a monster is there. At the moment, such monsters can be targetted normally (which means that this flag currently has no effect), but this may change in the future, as with CHAR_CLEAR monsters.\
\
(Note that currently both CHAR_CLEAR and CHAR_MULTI monsters are treated as normal monsters that are just a little hard to see... if you "l"ook for them, you will find them unless they are invisible and you cannot see invisible, and if you use the * command for targetting mode you can pick them as a target.)\
\
\
=== Understanding object.txt ===\
\
\pard\pardeftab720

\f0\fs22 \cf0 # Add some "IGNORE_XXX" flags to Rings, Amulets, etc.  XXX XXX\
\
# === Understanding k_info.txt ===\
\
# N: serial number : & object name~\
# G: symbol : color\
# I: tval : sval : pval\
# W: depth : charges : weight : cost\
# P: base armor class : base damage : plus to-hit : plus to-dam : plus to-ac\
# A: depth/rarity : depth/rarity : etc\
# F: flag | flag | etc\
# Y: runest | runesc\
\
# 'N' indicates the beginning of an entry. The serial number must\
# increase for each new item. The '&' and '~' symbols are use to\
# include articles and pluralization as necessary to ensure\
# grammatical correctness in object descriptions.\
\
# 'G' is for graphics - symbol and color. There are 16 colors, as\
# follows:\
\
# D - Black        w - White          s - Gray          o - Orange\
# r - Red          g - Green          b - Blue          u - Brown\
# d - Dark Gray    W - Light Gray     v - Violet        y - Yellow\
# R - Light Red    G - Light Green    B - Light Blue    U - Light Brown\
\
# 'I' is for basic information. The tval is for the type of item, the\
# sval identifies the subtype and the pval indicates the amount of\
# effect the item has, if applicable. \
\
# 'W' is for extra information. Depth is the depth the object is\
# normally found at, rarity determines how commoAn the object is,\
# weight is in tenth-pounds and cost is the items value.\
\
# 'P' is for power information. The items base armor class, its base\
# damage and pluses to-hit, to-dam and to-ac.\
\
# 'A' is for allocation - depth and rarity, in pairs. This allows an\
# item to have multiple natural depths and rarities. It is used to\
# ensure that certain vital items such as food and identify scrolls\
# are found throughout the dungeon.\
\
# Now identify scrolls are not found throughout the dungeon... however\
# detect magic scrolls are. Identify scrolls and *identify scrolls\
# are much rarer. Items of detect magic and detect curse are as frequent\
# as the old identify scrolls.\
\
# Staves of perception are replaced by staves of detect curse. Rods of\
# perception are replaced by rods of detect magic.\
\
# Brought back staves of perception. Nice and deep (Level 45).\
\
# 'F' is for flags. These are fairly self-explanatory. As many F:\
# lines may be used as are needed to specify all the flags and flags\
# are separated by the '|' symbol.\
\pard\pardeftab720\ql\qnatural

\f1\fs24 \cf0 \
\
\pard\pardeftab720

\f0\fs22 \cf0 # === Understanding p_class.txt ===\
\
# Format:\
# N:class number:class name\
# S:str:int:wis:dex:con:chr:agi:siz\
# C:dis:dev:sav:stl:srh:dig:tht:thn:thb\
# X:dis:dev:sav:stl:srh:dig:tht:thn:thb\
# I:exp:sense_base:sense_div:sense_type:sense_squared\
# A:max_attacks:min_weight:att_multiply:chg_weight\
# M:spellbook tval:spell-stat-study:spell-stat-mana:spell-stat-fail:first-level:max weight:high-power\
# B:spell number:level:mana:fail:exp\
# T:title\
# E:tval:sval:min:maxef\
# F:school flags\
\
# 'N' indicates the beginning of an entry. The serial number must\
# increase for each new class.\
\
# 'S' is for the stat modifiers - strength, intelligence, wisdom,\
# dexterity, constitution, charisma, agility, size.\
\
# 'C' is for the base skills - disarming, magic devices, saving throws,\
# stealth, searching ability, digging, to hit (throws), to hit (normal),\
# to hit (bows).\
\
# 'X' is for the skill modifiers - disarming, magic devices, saving\
# throws, stealth, searching ability, digging, to hit (throws), to hit\
# (normal), to hit (bows).  The modifiers are added to the base skill\
# every ten levels.\
\
# 'I' is for extra info - experience factor in percent, \
# base chance for pseudo-id (smaller is better),\
# level dependent divisor for the pseudo-id chance, type of sensing\
# (see object2.c), sense squared.\
\
# 'A' is for attack info - maximum possible number of attacks, minimum\
# weapon weight for calculating the number of attacks, multiplier for\
# attack calculations, weight divisor for charging.\
\
# 'M' is for magic info - tval of the used spellbook, number of the\
# spell-stat, level of the first spell, weight that hurts spells.\
\
# 'T' is for class titles (Up to 10 entries).\
\
# 'E' is for starting equipment - tval of the item, sval of the item,\
# minimum amount, maximum amount.\
\
# 'F' is for class flags.\
\pard\pardeftab720\ql\qnatural

\f1\fs24 \cf0 \
\
\pard\pardeftab720

\f0\fs22 \cf0 # === Understanding p_race.txt ===\
\
# Format:\
# N:race number:race name\
# S:str:int:wis:dex:con:chr:agi:siz\
# R:dis:dev:sav:stl:srh:dig:tht:thn:thb\
# X:expbase:infra:monster race equivalent\
# I:history:agebase:agemod:hometown\
# H:hgtmale:modhgtmale:hgtfemale:modhgtfemale\
# W:wgtmale:wgtfemale\
# F:racial flags\
# C:classes (numeric)\
# O:wield:bow:left_ring:right_ring:neck:lite:body:outer:arm:head:hands:feet\
# D:adjective\
\
# 'N' indicates the beginning of an entry. The serial number must\
# increase for each new race.\
\
# 'S' is for the stat modifiers - strength, intelligence, wisdom,\
# dexterity, constitution, charisma, agility, size.\
\
# 'R' is for the base skills - disarming, magic devices, saving throws,\
# stealth, searching ability, digging, to hit (throws), to hit (melee),\
# to hit (bows).\
\
# 'X' is for extra info - experience factor in percent, \
# range of infravision in 10 feets.\
\
# 'I' is for info - starting point of the player history, base age,\
# random age modifier, home town.\
\
# 'H' is height info - base height (males), mod height (males),\
# base height (females), mod height (females).\
\
# 'W' is weight info - base weight (males), base weight (females).\
\
# 'F' is for racial flags.\
\
# 'C' is for class choices.\
\
# 'O' is for objects. This defines if the class has a built in object\
# in a particular equipment slot.\
\
# XXX We also use this file to define possible shapes that a player can shape\
# change into as an effect, in addition to their starting race. To define that\
# a race is selectable as a starting race, it must have an index less than\
# the number of 'playable' races defined in the limits.txt file.\
\pard\pardeftab720\ql\qnatural

\f1\fs24 \cf0 \
\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\ql\qnatural\pardirnatural

\f0\fs22 \cf0 \
\pard\pardeftab720
\cf0 # === Understanding spell.txt ===\
\
# N: number : name\
# A: tval : sval : slot\
# C: class : level : mana : failure : min failure\
# F: flags\
# B: attack method : attack effect : damage\
# L: duration\
# S: other effect : parameter\
# D: description\
\
# 'N' indicates the beginning of an entry. The serial number must\
# increase for each new item.\
\
# 'A' is for appears in which objects, referenced by tval and sval.\
# Slot must be unique for objects which have multiple spells\
# associated with them, and slots must be numbered from 1 upwards.\
# The exception is rune stones, where the slot corresponds to the\
# second ('verb') runestone sval.\
\
# 'C' indicates the casting details listed by class. Note that currently\
# no more than 5 classes can cast a particular spell.\
\
# 'F' flags indicating many effects that take place when the spell is\
# cast.A\
\
# 'B' indicates the attack effect of the spell similar to monster attacks.\
# Note that blow specifies whether a directional parameter is needed,\
# and the increase in spell effect based on player level.\
# Note that we can specify a constant bonus to damage in this file, and\
# up to 4 blows are permitted.\
\
# If dice is > 0 and sides == 0, we use dice * level + bonus, or\
# dice * 25 + bonus, if the spell is the result of using an object.\
\
# Note that if you are applying blows to a player, you should apply the blow\
# that blinds them last, if possible, because they will not know the results\
# of the other blows.\
\
# 'L' indicates how long the duration component of the spell lasts.\
\
# 'S' indicates another parametised effect. The parameter value\
# depends on the effect in question.\
\
# 'D' description indicates the description display when the spell\
# takes effect. If an item has a description, it will be identified\
# as a part of the activation of the item.\
\
# ToDo: Explain the other monster and spell flags.  But maybe in another file.\
\pard\pardeftab720\ql\qnatural

\f1\fs24 \cf0 \
}